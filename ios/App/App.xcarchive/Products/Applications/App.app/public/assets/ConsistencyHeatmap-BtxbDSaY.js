import{t as A,j as e}from"./index-D41CZrVg.js";import{r as i,A as S,m as w}from"./motion-d9bwDdYN.js";import{y as M,b as O,V as L,A as T}from"./icons-DTWWE7WE.js";import"./react-vendor-DoSVpXge.js";const _=i.memo(({day:s,isSelected:n,onSelect:l,index:t})=>e.jsx(w.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:t*.01,type:"spring",stiffness:200,damping:20},onClick:o=>l(o,s),className:"relative aspect-square cursor-pointer touch-manipulation group",children:e.jsx("div",{className:`
        w-full h-full rounded-lg transition-all duration-300
        ${n?"ring-2 ring-white ring-offset-2 ring-offset-[#0a1128] z-10 scale-110 shadow-xl":"hover:scale-105 active:scale-90"}
        ${s.hasData?s.status==="OPTIMAL"?"bg-emerald-400 shadow-[0_0_15px_rgba(52,211,153,0.3)]":s.status==="MODERATE"?"bg-teal-400 shadow-[0_0_12px_rgba(45,212,191,0.3)]":"bg-rose-400 shadow-[0_0_12px_rgba(251,113,133,0.3)]":"bg-white/5 border border-white/5"}
      `})})),P=i.memo(({history:s,config:n})=>{const l=i.useMemo(()=>{const a=[],c=new Date,v=new Map(s.map(r=>[r.date,r]));for(let r=27;r>=0;r--){const h=new Date;h.setDate(c.getDate()-r);const u=h.toISOString().split("T")[0],d=v.get(u);let x=0,b=!1,m="NO DATA",j=!1;if(d){b=!0;const g=Object.values(d.processedState),E=g.filter(f=>f==="GREEN").length,D=g.filter(f=>f==="YELLOW").length;x=(E+D*.5)/(g.length||1),x>=.8?m="OPTIMAL":x>=.5?m="MODERATE":m="LOW",d.processedState.sleep==="GREEN"&&d.processedState.hrv==="GREEN"&&(j=!0)}const y=h.toLocaleDateString("en-US",{month:"short",day:"numeric"});a.push({date:u,score:x,hasData:b,status:m,displayDate:y,metGoals:j})}return a},[s]),[t,o]=i.useState(null);i.useEffect(()=>{l.length>0&&o(l[l.length-1])},[l]);const N=i.useCallback((a,c)=>{a.stopPropagation(),A(),o(c)},[]);return e.jsxs("div",{className:"w-full h-full flex flex-col px-2 pt-2",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 md:gap-3 content-start mb-4 max-w-2xl mx-auto w-full",children:l.map((a,c)=>e.jsx(_,{day:a,index:c,isSelected:(t==null?void 0:t.date)===a.date,onSelect:N},a.date))}),e.jsx("div",{className:"mt-2 md:mt-3"}),e.jsxs("div",{className:"space-y-3 md:space-y-4 pb-2",children:[e.jsx(S,{mode:"wait",children:t?e.jsxs(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"bg-white/5 p-3 md:p-4 rounded-2xl border border-white/5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${t.hasData?"bg-white/10":"bg-white/5"}`,children:e.jsx(M,{size:18,className:"text-white/60"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest text-white/30",children:"History Log"}),e.jsx("div",{className:"text-sm font-bold text-white",children:t.displayDate})]})]}),t.hasData?e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("span",{className:`text-xs font-bold uppercase tracking-wide ${t.status==="OPTIMAL"?"text-emerald-400":t.status==="MODERATE"?"text-teal-400":"text-rose-400"}`,children:t.status}),e.jsx(O,{size:12,className:t.status==="OPTIMAL"?"text-emerald-400":t.status==="MODERATE"?"text-teal-400":"text-rose-400"})]}),t.metGoals&&e.jsxs("div",{className:"flex items-center gap-1 opacity-70",children:[e.jsx(L,{size:10,className:"text-emerald-400"}),e.jsx("span",{className:"text-[9px] text-white/50",children:"Baseline Met"})]})]}):e.jsxs("div",{className:"flex items-center gap-1 opacity-40",children:[e.jsx(T,{size:14}),e.jsx("span",{className:"text-[10px] uppercase font-bold",children:"No Data"})]})]},t.date):e.jsx("div",{className:"h-[64px] flex items-center justify-center text-[10px] text-white/20 uppercase tracking-widest bg-white/5 rounded-2xl border border-white/5 border-dashed",children:"Select a tile"})}),e.jsxs("div",{className:"flex justify-between items-center px-2 pt-3 border-t border-white/5",children:[e.jsx(p,{color:"bg-emerald-400",label:"High"}),e.jsx(p,{color:"bg-teal-400",label:"Mid"}),e.jsx(p,{color:"bg-rose-400",label:"Low"}),e.jsx(p,{color:"bg-white/10 border border-white/10",label:"Empty"})]})]})]})}),p=i.memo(({color:s,label:n})=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`w-2 h-2 md:w-3 md:h-3 rounded-full ${s}`}),e.jsx("span",{className:"text-[9px] md:text-[11px] uppercase font-bold text-white/30",children:n})]}));export{P as ConsistencyHeatmap};
