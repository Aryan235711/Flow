import{t as E,j as e}from"./index-D41CZrVg.js";import{r,A as $,m}from"./motion-d9bwDdYN.js";import{t as S,y as V,q as z,Q as R,M as G,b as A,W as H,c as M,z as I,K as O,N as L,J as W,l as Y,f as Z,a as P,E as T,G as K,Z as B}from"./icons-DTWWE7WE.js";import"./react-vendor-DoSVpXge.js";const U=r.memo(({score:t})=>{const l=2*Math.PI*18,c=Math.min(100,Math.max(0,t)),i=l-c/100*l,d=t>=80?"text-emerald-400":t>=50?"text-teal-400":"text-rose-400";return e.jsxs("div",{className:"relative w-12 h-12 flex items-center justify-center",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"24",cy:"24",r:18,stroke:"rgba(255,255,255,0.1)",strokeWidth:"3",fill:"transparent"}),e.jsx("circle",{cx:"24",cy:"24",r:18,stroke:"currentColor",strokeWidth:"3",fill:"transparent",strokeDasharray:l,strokeDashoffset:i,strokeLinecap:"round",className:d,style:{filter:"drop-shadow(0 0 2px currentColor)"}})]}),e.jsx("span",{className:`absolute text-[10px] font-black font-outfit ${d}`,children:t})]})}),x=r.memo(({label:t,value:o,icon:l,color:c})=>e.jsxs(m.div,{variants:{hidden:{opacity:0,y:10},show:{opacity:1,y:0}},className:"bg-white/5 p-3 rounded-2xl flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1 opacity-50",children:[e.jsx(l,{size:10,className:c}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:t})]}),e.jsx("span",{className:"text-sm font-bold font-outfit",children:o})]})),q=r.memo(({entry:t,idx:o,isExpanded:l,onToggle:c,onDelete:i,onEdit:d})=>{const v=s=>{const h=Object.values(s.processedState),y=h.filter(p=>p==="GREEN").length,j=h.filter(p=>p==="YELLOW").length,w=h.length||1;return Math.round((y*100+j*50)/w)},N=s=>{switch(s){case"PEAK":return e.jsx(B,{size:16,className:"text-white"});case"FOGGY":return e.jsx(K,{size:16,className:"text-white"});case"DRAINED":return e.jsx(T,{size:16,className:"text-white"});case"FROZEN":return e.jsx(P,{size:16,className:"text-white"});default:return e.jsx(Z,{size:16,className:"text-white"})}},f=s=>{switch(s){case"PEAK":return"bg-teal-500 shadow-teal-500/40";case"FOGGY":return"bg-slate-500 shadow-slate-500/40";case"DRAINED":return"bg-rose-500 shadow-rose-500/40";case"FROZEN":return"bg-cyan-500 shadow-cyan-500/40";default:return"bg-emerald-500 shadow-emerald-500/40"}},g=v(t),u=t.rawValues.cognition==="FROZEN",b=g>=80?"bg-emerald-500":g>=50?"bg-teal-500":"bg-rose-500";return e.jsxs(m.div,{layout:!0,initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:o*.05,type:"spring",stiffness:300,damping:30},className:`glass rounded-[32px] overflow-hidden transition-all duration-300 relative ${l?"bg-white/[0.06] shadow-xl ring-1 ring-white/10":"active:scale-[0.98]"}`,children:[e.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${b} opacity-50`}),e.jsx("div",{onClick:()=>c(o),className:"p-4 pl-6 cursor-pointer touch-manipulation",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shadow-lg ${f(t.rawValues.cognition||"STEADY")}`,children:N(t.rawValues.cognition||"STEADY")}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-white/30 uppercase tracking-widest font-outfit mb-0.5",children:t.date}),e.jsx("h3",{className:`text-lg font-bold font-outfit leading-none ${u?"text-cyan-400":"text-white"}`,children:t.symptomName})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{score:g}),e.jsx(R,{size:20,className:`text-white/20 transition-transform duration-300 ${l?"rotate-180":""}`})]})]})}),e.jsx($,{children:l&&e.jsx(m.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1,transition:{type:"spring",stiffness:300,damping:30}},exit:{height:0,opacity:0,transition:{duration:.2}},className:"overflow-hidden bg-[#020617]/30 border-t border-white/5",children:e.jsxs(m.div,{className:"p-6 pl-8 grid grid-cols-2 gap-3",initial:"hidden",animate:"show",variants:{show:{transition:{staggerChildren:.05}}},children:[e.jsx(x,{label:"Sleep",value:`${t.rawValues.sleep.toFixed(1)}h`,icon:G,color:"text-teal-400"}),e.jsx(x,{label:"RHR",value:`${t.rawValues.rhr} bpm`,icon:A,color:"text-rose-400"}),e.jsx(x,{label:"HRV",value:`${t.rawValues.hrv} ms`,icon:H,color:"text-emerald-400"}),e.jsx(x,{label:"Protein",value:`${t.rawValues.protein}g`,icon:M,color:"text-amber-400"}),e.jsx(x,{label:"Sun",value:t.rawValues.sun,icon:I,color:"text-yellow-400"}),e.jsx(x,{label:"Exertion",value:t.rawValues.exercise,icon:O,color:"text-cyan-400"}),e.jsx(x,{label:"Gut",value:`${t.rawValues.gut}/5`,icon:L,color:"text-purple-400"}),e.jsxs(m.div,{variants:{hidden:{opacity:0,y:10},show:{opacity:1,y:0}},className:"col-span-2 flex gap-2 mt-2",children:[!t.isSystemGenerated&&e.jsxs("button",{onClick:s=>{s.stopPropagation(),d(t,o)},className:"flex-1 p-3 rounded-2xl bg-teal-500/10 hover:bg-teal-500/20 text-teal-400 flex items-center justify-center gap-2 transition-colors active:scale-95 touch-manipulation border border-teal-500/20",children:[e.jsx(W,{size:14})," ",e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Edit Entry"})]}),e.jsxs("button",{onClick:s=>{s.stopPropagation(),window.confirm("Permanently delete this telemetry record?")&&i(t.date)},className:`p-3 rounded-2xl bg-rose-500/10 hover:bg-rose-500/20 text-rose-500 flex items-center justify-center gap-2 transition-colors active:scale-95 touch-manipulation ${t.isSystemGenerated?"w-full":"w-auto px-4"}`,children:[e.jsx(Y,{size:14})," ",e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:t.isSystemGenerated?"Delete":""})]})]})]})})})]})}),ee=r.memo(({history:t,isMockData:o,onDelete:l,onEdit:c,isPremium:i,onTriggerPaywall:d})=>{const[v,N]=r.useState(null),[f,g]=r.useState(!1),[u,b]=r.useState(""),[s,h]=r.useState(""),y=r.useCallback(a=>{E(),N(n=>n===a?null:a)},[]),j=t.slice().reverse(),w=j.filter(a=>{if(!u&&!s)return!0;const n=new Date(a.date),C=u?new Date(u):null,D=s?new Date(s):null;return!(C&&n<C||D&&n>D)}),p=i?w:w.slice(0,7),k=j.length-p.length,F=()=>{E(),i?g(a=>!a):d()};return e.jsxs("div",{className:"px-5 pb-40 pt-28 space-y-8 md:px-10 md:pt-40 max-w-6xl mx-auto",children:[e.jsxs("header",{className:"px-2 flex justify-between items-end mb-4 md:mb-8",children:[e.jsxs("div",{children:[o&&e.jsxs("div",{className:"flex items-center gap-2 mb-2 opacity-50",children:[e.jsx(S,{size:10,className:"text-teal-400"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-teal-400",children:"Simulation Mode"})]}),e.jsx("h1",{className:"text-5xl md:text-7xl font-black font-outfit tracking-tighter text-white",children:"Registry"}),e.jsx("p",{className:"text-teal-300/40 text-sm md:text-lg font-medium mt-2",children:"Historical telemetry logs."})]}),e.jsx("button",{onClick:F,className:`
            w-12 h-12 md:w-16 md:h-16 rounded-2xl md:rounded-[24px] flex items-center justify-center border transition-all active:scale-90
            ${f?"bg-teal-500 text-white border-teal-500 shadow-lg":"bg-white/5 border-white/5 text-white/50 hover:bg-white/10"}
          `,children:i?e.jsx(V,{size:24}):e.jsx(z,{size:24,className:"text-amber-500"})})]}),e.jsx($,{children:f&&i&&e.jsx(m.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"bg-teal-500/10 border border-teal-500/20 rounded-2xl md:rounded-[32px] p-6 md:p-10 mb-4 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-black text-teal-300/60 uppercase tracking-widest block mb-3",children:"From Date"}),e.jsx("input",{type:"date",value:u,onChange:a=>b(a.target.value),className:"w-11/12 glass p-4 rounded-xl border border-teal-500/20 bg-teal-500/5 text-white text-sm font-bold focus:border-teal-500/50 focus:bg-teal-500/10 transition-all"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs font-black text-teal-300/60 uppercase tracking-widest block mb-3",children:"To Date"}),e.jsx("input",{type:"date",value:s,onChange:a=>h(a.target.value),className:"w-11/12 glass p-4 rounded-xl border border-teal-500/20 bg-teal-500/5 text-white text-sm font-bold focus:border-teal-500/50 focus:bg-teal-500/10 transition-all"})]})]}),e.jsx("button",{onClick:()=>{b(""),h("")},className:"w-full py-3 bg-teal-500/20 hover:bg-teal-500/30 text-teal-300 font-black rounded-xl transition-colors active:scale-95",children:"Clear Filter"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.length===0?e.jsxs("div",{className:"col-span-full text-center py-24 opacity-10",children:[e.jsx(S,{size:48,className:"mx-auto mb-4"}),e.jsx("p",{className:"text-sm uppercase tracking-widest font-black",children:"Registry Empty"})]}):p.map((a,n)=>e.jsx(q,{entry:a,idx:n,isExpanded:v===n,onToggle:y,onDelete:l,onEdit:c},`${a.date}-${n}`)),!i&&k>0&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},onClick:d,className:"md:col-span-2 glass rounded-[32px] p-6 border-amber-500/20 relative overflow-hidden group cursor-pointer active:scale-95 transition-all",children:e.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center text-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-500/10 rounded-2xl flex items-center justify-center text-amber-500 mb-1",children:e.jsx(z,{size:20})}),e.jsx("h3",{className:"text-xl font-black font-outfit text-white",children:"Deep Archive Locked"}),e.jsxs("p",{className:"text-white/40 text-sm font-medium",children:[k," older logs stored securely."]}),e.jsx("span",{className:"mt-2 text-[10px] font-black uppercase tracking-widest text-amber-400 bg-amber-500/10 px-4 py-2 rounded-full border border-amber-500/20 group-hover:bg-amber-500 group-hover:text-black transition-colors",children:"Unlock Vault"})]})})]})]})});export{ee as HistoryView};
